{"version":3,"sources":["webpack:///./src/App.vue?e72e","webpack:///./src/App.vue","webpack:///./src/lib/ecs/MaskUtils.js","webpack:///src/components/Entity.vue","webpack:///./src/components/Entity.vue?9623","webpack:///./src/components/Entity.vue","webpack:///src/components/ECSView.vue","webpack:///./src/components/ECSView.vue?0808","webpack:///./src/components/ECSView.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?7b56","webpack:///./src/views/Home.vue","webpack:///./src/views/About.vue?abe0","webpack:///./src/views/About.vue","webpack:///./src/router.js","webpack:///./src/lib/ecs/entity_manager.js","webpack:///./src/lib/ecs/component_manager.js","webpack:///./src/lib/ecs/system_manager.js","webpack:///./src/lib/ecs/logic_system.js","webpack:///./src/lib/ecs/systems/style_system.js","webpack:///./src/lib/ecs/systems/messaging_system.js","webpack:///./src/lib/ecs/systems/movement_system.js","webpack:///./src/lib/ecs/ecs.js","webpack:///./src/lib/ecs/component.js","webpack:///./src/lib/ecs/components/messaging_component.js","webpack:///./src/lib/ecs/components/transform_component.js","webpack:///./src/lib/ecs/components/style_component.js","webpack:///./src/store.js","webpack:///./src/main.js"],"names":["App_render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticRenderFns","injectStyle","context","__webpack_require__","__vue_script__","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","Object","component_normalizer","App","MaskUtils_maskUtils","maskUtils","classCallCheck_default","defineProperty","configurable","enumerable","writable","value","MessagingComponent","TransformComponent","StyleComponent","createClass_default","key","authority","mask","MaskUtils","Entity","style","Entity_render","staticClass","data-eid","eid","Entity_staticRenderFns","Entity_injectStyle","Entity___vue_template_functional__","Entity___vue_styles__","Entity___vue_scopeId__","Entity___vue_module_identifier__","Entity_Component","components_Entity","ECSView","entities","length","ECSView_render","_v","_s","entityAmt","_l","entity","styleobj","entitydata","ECSView_staticRenderFns","ECSView_injectStyle","ECSView___vue_template_functional__","ECSView___vue_styles__","ECSView___vue_scopeId__","ECSView___vue_module_identifier__","ECSView_Component","components_ECSView","Home","Home_render","Home_staticRenderFns","Home___vue_template_functional__","Home___vue_styles__","Home___vue_scopeId__","Home___vue_module_identifier__","Home_Component","views_Home","About_render","_m","About_staticRenderFns","About___vue_script__","About___vue_template_functional__","About___vue_styles__","About___vue_scopeId__","About___vue_module_identifier__","About_Component","About","vue_runtime_esm","use","vue_router_esm","router","routes","path","name","component","entity_manager","maxEntities","nextEntityID","componentManager","setComponentManager","getEntity","getEntities","addEntity","componentMask","Array","fill","removeEntity","removeAll","addFlag","removeFlag","component_manager","entityManager","components","Map","addComponent","has","set","get","forEach","val","removeComponent","getComponent","getComponentBundle","componentBundle","matchesAny","getAll","system_manager","systems","addSystem","system","push","tick","delta","entityCache","s","logic_system","ecs","style_system","styleSystem","Masks","transformComponent","styleComponent","transform","x","y","randomChance","Math","floor","random","backgroundColor","messaging_system","messagingSystem","movement_system","movementSystem","rate","store","isInit","running","tickCount","lastTimestamp","targetFramerate","updateAttempts","maxUpdateAttempts","systemManager","tmpInit","init","a","performance","now","requestAnimationFrame","bind","stop","timestamp","panic","update","dispatch","getEntityMap","arguments","undefined","_this","entityMap","_loop","componentArray","data","messaging_component","messagingComponent","messages","components_transform_component","transform_component","rot","style_component","position","width","height","vuex_esm","store_ecs","ecs_ecs","store_store","Store","state","getters","mutations","initEcs","createEntityLoop","setInterval","setEntities","stopEcs","actions","commit","config","productionTip","render","h","created","$mount"],"mappings":"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","file":"js/app.e1686520.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5635bda2\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5635bda2\\\",\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nvar __vue_script__ = null\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5635bda2\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","export class maskUtils {\n    Masks = {\n        MessagingComponent: 0x01 << 0,\n        TransformComponent: 0x01 << 1,\n        StyleComponent: 0x01 << 2\n    }\n\n    matches(authority, mask) {\n        return authority == (authority & mask);\n    }\n\n    matchesAny(authority, mask) {\n        return (authority & mask) != 0x00;\n    }\n}\n\nexport let MaskUtils = new maskUtils();\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/MaskUtils.js","<template>\n    <div class='entity' v-bind:style=\"styleobj\" :data-eid=\"eid\">\n    </div>\n</template>\n\n<script>\n    import { MaskUtils } from '../lib/ecs/MaskUtils'\n\n    export default {\n        props: [\n           'eid',\n           'entitydata'\n        ],\n\n        computed: {\n            styleobj: function() {\n                for(let c = 0; c < this.entitydata.components.length; c++) {\n                    if (MaskUtils.matchesAny(this.entitydata.components[c].mask, MaskUtils.Masks.StyleComponent)) {\n                        return this.entitydata.components[c].data.style;\n                    }\n                }\n            }\n        },\n\n    }\n</script>\n\n<style scoped>\n.entity {\n    border-radius: 5px;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/Entity.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"entity\",style:(_vm.styleobj),attrs:{\"data-eid\":_vm.eid}})}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2c26f82c\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Entity.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2c26f82c\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Entity.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/moomat/Documents/dev_projects/web_projects/vue-ecs/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Entity.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/moomat/Documents/dev_projects/web_projects/vue-ecs/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Entity.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2c26f82c\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Entity.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2c26f82c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Entity.vue\n// module id = null\n// module chunks = ","<template>\n    <div>\n        <div class='scene-data'>\n            Amount of entities: {{ entityAmt }}\n        </div>\n        <div class=\"scene-wrapper\">\n            <Entity v-for=\"(entity, id) in this.entities\" :data-eid=\"entity.eid\" :key=\"id\" :styleobj=\"entity.style\" :eid=\"entity.eid\" :entitydata=\"entity\">\n                ENTITY\n            </Entity>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Entity from \"@/components/Entity.vue\"\n\nexport default {\n    methods: {\n        ecsInit() {\n            this.$store.dispatch('init');\n        },\n        addEntity() {\n            this.$store.dispatch('addEntity');\n        },\n        ecsStop() {\n            this.$store.dispatch('stopEcs');\n        }\n    },\n    computed: {\n        entities() {\n            return this.$store.getters.entities;\n        },\n        entityAmt() {\n            return this.$store.getters.entities.length;\n        }\n\n    },\n    components: {\n        Entity,\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n    margin: 40px 0 0;\n}\n\nul {\n    list-style-type: none;\n    padding: 0;\n}\n\nli {\n    display: inline-block;\n    margin: 0 10px;\n}\n\na {\n    color: #42b983;\n}\n\n.scene-wrapper {\n    background-color: black;\n    width: 1024px;\n    height: 768px;\n    position: relative;\n    margin: 0 auto;\n    margin-top: 15px;\n    overflow: hidden;\n}\n\n.scene-data {\n    margin-top: 15px;\n    font-size: 24px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ECSView.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"scene-data\"},[_vm._v(\"\\n        Amount of entities: \"+_vm._s(_vm.entityAmt)+\"\\n    \")]),_c('div',{staticClass:\"scene-wrapper\"},_vm._l((this.entities),function(entity,id){return _c('Entity',{key:id,attrs:{\"data-eid\":entity.eid,\"styleobj\":entity.style,\"eid\":entity.eid,\"entitydata\":entity}},[_vm._v(\"\\n            ENTITY\\n        \")])}))])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ebafebf\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ECSView.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ebafebf\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ECSView.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/moomat/Documents/dev_projects/web_projects/vue-ecs/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ECSView.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/moomat/Documents/dev_projects/web_projects/vue-ecs/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ECSView.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ebafebf\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ECSView.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4ebafebf\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ECSView.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"home\">\n        <ECSView/>\n    </div>\n</template>\n\n<script>\nimport ECSView from '@/components/ECSView.vue'\n\nexport default {\n    components: {\n        ECSView\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('ECSView')],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-108e3a11\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Home.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/moomat/Documents/dev_projects/web_projects/vue-ecs/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/moomat/Documents/dev_projects/web_projects/vue-ecs/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-108e3a11\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Home.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('h1',[_vm._v(\"This is an about page\")])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1ae8a7be\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/About.vue\n// module id = null\n// module chunks = ","/* script */\nvar __vue_script__ = null\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ae8a7be\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./About.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/About.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Home from './views/Home.vue'\nimport About from './views/About.vue'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: Home\n    },\n    {\n      path: '/about',\n      name: 'about',\n      component: About\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router.js","export default function(maxEntities) {\n    return {\n        entities: null,\n\n        maxEntities: maxEntities,\n        nextEntityID: 0,\n        componentManager: null,\n\n        setComponentManager(componentManager) {\n            this.componentManager = componentManager;\n        },\n\n        getEntity(eid) {\n            return this.entities[eid];\n        },\n\n        getEntities() {\n            return this.entities;\n        },\n\n        addEntity(componentMask) {\n            if (this.entities === null)\n                this.entities = new Array(this.maxEntities).fill(null);\n\n            let eid = this.nextEntityID;\n\n            this.entities[eid] = componentMask;\n            this.nextEntityID++;\n\n            return eid;\n        },\n\n        removeEntity(eid) {\n            this.componentManager.removeAll(eid);\n            this.entities[eid] = null;\n        },\n\n        addFlag(eid, mask) {\n            this.entities[eid] = this.entities[eid] | mask;\n        },\n\n        removeFlag(eid, mask) {\n            this.entities[eid] = this.entities[eid] & ~mask;\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/entity_manager.js","import { MaskUtils } from './MaskUtils.js'\n\nexport default function(maxEntities, entityManager) {\n    return {\n        maxEntities: maxEntities,\n        entityManager: entityManager,\n\n        components: new Map(),\n\n        addComponent(eid, component) {\n            let mask = component.mask;\n            delete component.mask;\n            \n            if (!this.components.has(mask))\n                this.components.set(mask, new Array(this.maxEntities));\n\n            this.components.get(mask)[eid] = component;\n\n            this.entityManager.addFlag(eid, mask);\n        },\n\n        removeAll(eid) {\n            this.components.forEach((val, key) => {\n                val[eid] = null;\n            });\n        },\n\n        removeComponent(eid, mask) {\n            this.components.get(mask)[eid] = null;\n        },\n\n        getComponent(eid, mask) {\n            if (!this.components.has(mask))\n                return null;\n\n            return this.components.get(mask)[eid];\n        },\n\n        getComponentBundle(eid, mask) {\n            let componentBundle = new Map();\n\n            this.components.forEach((val, key) => {\n                if (MaskUtils.matchesAny(key, mask)) {\n                    componentBundle.set(key, val[eid]);\n                }\n            });\n\n            return componentBundle;\n        },\n\n        getAll() {\n            return this.components;\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/component_manager.js","export default function(entityManager, componentManager) {\n    return {\n        entityManager: entityManager,\n        componentManager: componentManager,\n\n        systems: [],\n\n        addSystem(system) {\n            this.systems.push(system);\n        },\n\n        tick(delta) {\n            let entityCache = this.entityManager.getEntities();\n            let componentCache = this.componentManager.getAll();\n\n            if (entityCache === 'undefined' || entityCache == null || entityCache.length < 1)\n                return;\n\n            for (let s = 0; s < this.systems.length; s++) {\n                let mask = this.systems[s].mask;\n\n                for (let eid = 0; eid < entityCache.length; eid++) {\n                    if (entityCache[eid] == null)\n                        continue;\n                    let componentBundle = componentManager.getComponentBundle(eid, mask);\n                    this.systems[s].tick(delta, eid, componentBundle);\n                }\n                \n            }\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/system_manager.js","export default function(ecs) {\n    return {\n        ecs: ecs,\n        mask: 0x00,\n        tick(delta, eid, componentBundle) {},\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/logic_system.js","import { MaskUtils } from '../MaskUtils'\nimport LogicSystem from '../logic_system.js'\n\nexport default function(ecs) {\n    let styleSystem = new LogicSystem(ecs);\n\n    styleSystem.mask = MaskUtils.Masks.MessagingComponent | MaskUtils.Masks.TransformComponent | MaskUtils.Masks.StyleComponent;\n    styleSystem.tick = function(delta, eid, componentBundle) {\n        let transformComponent = componentBundle.get(MaskUtils.Masks.TransformComponent);\n        let styleComponent = componentBundle.get(MaskUtils.Masks.StyleComponent);\n\n        styleComponent.style.transform = 'translate3d(' + transformComponent.x + 'px,' + transformComponent.y + 'px, 0)';\n\n        let randomChance = Math.floor(Math.random() * 1000);\n        if (randomChance <= 10) {\n            switch (styleComponent.style.backgroundColor) {\n                case 'red':\n                    styleComponent.style.backgroundColor = 'orange';\n                    break;\n                case 'orange':\n                    styleComponent.style.backgroundColor = 'yellow';\n                    break;\n                case 'yellow':\n                    styleComponent.style.backgroundColor = 'green';\n                    break;\n                case 'green':\n                    styleComponent.style.backgroundColor = 'blue';\n                    break;\n                case 'blue':\n                    styleComponent.style.backgroundColor = 'magenta';\n                    break;\n                case 'magenta':\n                    styleComponent.style.backgroundColor = 'purple';\n                    break;\n                case 'purple':\n                    styleComponent.style.backgroundColor = 'white';\n                    break;\n                case 'white':\n                    styleComponent.style.backgroundColor = '#111';\n                    break;\n            }\n        }\n    }\n\n    return styleSystem;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/systems/style_system.js","import { MaskUtils } from '../MaskUtils'\nimport LogicSystem from '../logic_system.js'\n\nexport default function(ecs) {\n    let messagingSystem = new LogicSystem(ecs);\n    messagingSystem.mask = MaskUtils.Masks.MessagingComponent;\n\n    messagingSystem.tick = function(delta, eid, componentBundle) {\n        //console.log('messagingSystem tick', {delta: delta, eid: eid, componentBundle: componentBundle});\n    }\n\n    return messagingSystem;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/systems/messaging_system.js","import { MaskUtils } from '../MaskUtils'\nimport LogicSystem from '../logic_system.js'\n\nexport default function(ecs) {\n    let movementSystem = new LogicSystem(ecs);\n    movementSystem.mask = MaskUtils.Masks.MessagingComponent | MaskUtils.Masks.TransformComponent;\n\n    movementSystem.tick = function(delta, eid, componentBundle) {\n        let transformComponent = componentBundle.get(MaskUtils.Masks.TransformComponent);\n\n        //transformComponent.x -= delta * 0.001;\n        transformComponent.y += delta * transformComponent.rate;\n\n        if (transformComponent.y > 768)\n            this.ecs.removeEntity(eid);\n\n        //console.log('movementSystem tick', {delta: delta, eid: eid, componentBundle: componentBundle});\n    }\n\n    return movementSystem;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/systems/movement_system.js","import EntityManager from './entity_manager'\nimport ComponentManager from './component_manager'\nimport SystemManager from './system_manager'\n\n/* tmp */\nimport StyleSystem from './systems/style_system'\nimport MessagingSystem from './systems/messaging_system'\nimport MovementSystem from './systems/movement_system'\n/* end tmp*/\n\nexport default function() {\n    return {\n        store: null,\n        maxEntities: 32768,\n\n        isInit: false,\n        running: true,\n        tickCount: 0,\n        lastTimestamp: 0,\n        delta: 0.0,\n        targetFramerate: 1000 / 60,\n        updateAttempts: 0,\n        maxUpdateAttempts: 100,\n\n        entityManager: null,\n        componentManager: null,\n        systemManager: null,\n\n        tmpInit() {\n\n        },\n\n        init(store) {\n            if (this.isInit)\n                return;\n            this.isInit = true;\n\n            this.store = store.a; // Why?!?\n\n            /* Set up objects */\n            this.entityManager = new EntityManager(this.maxEntities);\n            \n            this.componentManager = new ComponentManager(this.maxEntities, this.entityManager);\n            this.entityManager.setComponentManager(this.componentManager);\n            \n            this.systemManager = new SystemManager(this.entityManager, this.componentManager);\n\n            /* Set up systems */\n            let messagingSystem = new MessagingSystem(this);\n            this.systemManager.addSystem(messagingSystem);\n\n            let movementSystem = new MovementSystem(this);\n            this.systemManager.addSystem(movementSystem);\n\n            let styleSystem = new StyleSystem(this);\n            this.systemManager.addSystem(styleSystem);\n\n            /* Misc. */\n            this.running = true;\n            this.delta = 0.0;\n            this.updateAttempts = 0;\n            this.tickCount = 0;\n            this.lastTimestamp = performance.now();\n            requestAnimationFrame(this.tick.bind(this));\n        },\n\n        stop() {\n            this.tickCount = 0;\n            this.delta = 0.0;\n            this.updateAttempts = 0;\n            this.running = false;\n        },\n\n        tick(timestamp) {\n            if (!this.running)\n                return;\n\n            if (timestamp < this.lastTimestamp + this.targetFramerate) {\n                requestAnimationFrame(this.tick.bind(this));\n                return;\n            }\n\n            this.delta += timestamp - this.lastTimestamp;\n            this.lastTimestamp = timestamp;\n\n            while (this.delta >= this.targetFramerate) {\n                this.updateAttempts++;\n                if (this.updateAttempts >= this.maxUpdateAttempts) {\n                    this.panic();\n                    this.updateAttempts = 0;\n                }\n\n                this.update(this.delta);\n                this.delta -= this.targetFramerate;\n            }\n            this.updateAttempts = 0;\n            this.tickCount++;\n\n            if (this.store != null && this.store !== 'undefined' && this.store)\n                this.store.dispatch('setEntities', this.getEntityMap());\n\n            requestAnimationFrame(this.tick.bind(this));\n        },\n\n        update(delta) {\n            this.systemManager.tick(delta);\n        },\n\n        panic() {\n            this.delta = 0;\n        },\n\n        addEntity(componentMask = 0x00) {\n            return this.entityManager.addEntity(componentMask);\n        },\n\n        removeEntity(eid) {\n            this.entityManager.removeEntity(eid);\n        },\n\n        addComponent(eid, component) {\n            this.componentManager.addComponent(eid, component);\n        },\n\n        getEntities() {\n            return this.entityManager.getEntities();\n        },\n\n        getEntityMap() {\n            let entities = this.entityManager.getEntities();\n            if (entities == null)\n                return;\n\n            let entityMap = new Array();\n\n            for(let eid = 0; eid < entities.length; eid++) {\n                if (entities[eid] == null)\n                    continue;\n\n                let componentArray = [];\n                let componentBundle = this.componentManager.getComponentBundle(eid, entities[eid]);\n                componentBundle.forEach((val, key) => {\n                    componentArray.push({\n                        mask: key,\n                        data: val\n                    })\n                });\n\n                entityMap.push({\n                    eid: eid,\n                    components: componentArray\n                });\n            }\n\n            return entityMap;\n        },\n\n        getComponentBundle(eid, mask) {\n            return this.componentManager.getComponentBundle(eid, mask);\n        },\n\n        getComponent(eid, mask) {\n            return this.componentManager.getComponent(eid, mask);\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/ecs.js","export default () => {\n    return {\n        mask: 0x00\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/component.js","import { MaskUtils } from '../MaskUtils'\nimport Component from '../component'\n\nexport default () => {\n    let messagingComponent = new Component();\n    messagingComponent.mask = MaskUtils.Masks.MessagingComponent;\n\n    messagingComponent.messages = [];\n\n    return messagingComponent;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/components/messaging_component.js","import { MaskUtils } from '../MaskUtils'\nimport Component from '../component'\n\nexport default () => {\n    var transform_component = new Component();\n    transform_component.mask = MaskUtils.Masks.TransformComponent;\n\n    transform_component.x = Math.floor(Math.random() * 1014);\n    transform_component.y = Math.floor(Math.random() * 758) - 768;\n    transform_component.rot = 0.0;\n\n    transform_component.rate = (Math.random() / 10) + 0.025;\n\n    return transform_component;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/components/transform_component.js","import { MaskUtils } from '../MaskUtils'\nimport Component from '../component'\n\nexport default () => {\n    var styleComponent = new Component();\n    styleComponent.mask = MaskUtils.Masks.StyleComponent;\n\n    styleComponent.style = {\n        position: 'absolute',\n        backgroundColor: 'red',\n        width: '10px',\n        height: '10px',\n        transform: 'translate3d(' + Math.floor(Math.random() * 758) + 'px,' + Math.floor(Math.random() * 1024) + 'px, 0)'\n    }\n\n    return styleComponent;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ecs/components/style_component.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport ECS from './lib/ecs/ecs'\n\nimport MessagingComponent from '@/lib/ecs/components/messaging_component'\nimport TransformComponent from '@/lib/ecs/components/transform_component'\nimport StyleComponent from '@/lib/ecs/components/style_component'\n\nVue.use(Vuex)\n\nvar ecs = new ECS();\n\nexport const store = new Vuex.Store({\n    state: {\n        entities: [],\n    },\n    getters: {\n        entities: state => {\n            return state.entities;\n        },\n    },\n    mutations: {\n        initEcs: () => {\n            ecs.init(this);\n\n            let createEntityLoop = function() {\n                for (let x = 0; x < 20; x++) {\n                    let eid = ecs.addEntity();\n\n                    let messagingComponent = new MessagingComponent();\n                    let transformComponent = new TransformComponent();\n                    let styleComponent = new StyleComponent();\n\n                    ecs.addComponent(eid, messagingComponent);\n                    ecs.addComponent(eid, transformComponent);\n                    ecs.addComponent(eid, styleComponent);\n                }\n            }\n\n            createEntityLoop();\n            setInterval(createEntityLoop, 1000);\n        },\n        addEntity: () => {\n            for (let x = 0; x < 20; x++) {\n                let eid = ecs.addEntity();\n\n                let messagingComponent = new MessagingComponent();\n                let transformComponent = new TransformComponent();\n                let styleComponent = new StyleComponent();\n\n                ecs.addComponent(eid, messagingComponent);\n                ecs.addComponent(eid, transformComponent);\n                ecs.addComponent(eid, styleComponent);\n            }\n        },\n        setEntities: (state, entities) => {\n            if (entities === 'undefined' || entities == null || entities.length < 1)\n                return;\n\n            state.entities = entities;\n        },\n        stopEcs: () => {\n            ecs.stop();\n        }\n    },\n    actions: {\n        init: (context) => {\n            context.commit('initEcs');\n        },\n        addEntity: (context) => {\n            context.commit('addEntity');\n        },\n        setEntities: (context, entities) => {\n            context.commit('setEntities', entities);\n        },\n        stopEcs: (context) => {\n            context.commit('stopEcs');\n        }\n    }\n})\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport {store} from './store'\n\nVue.config.productionTip = false\n\nnew Vue({\n    router,\n    store,\n    render: h => h(App),\n    created() {\n        store.dispatch('init');\n    }\n}).$mount('#app')\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}